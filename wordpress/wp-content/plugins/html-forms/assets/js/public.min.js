!function(){var a=void 0;!function o(s,a,u){function l(e,t){if(!a[e]){if(!s[e]){var n=!1;if(!t&&n)return n(e,!0);if(c)return c(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=a[e]={exports:{}};s[e][0].call(i.exports,function(t){return l(s[e][1][t]||t)},i,i.exports,o,s,a,u)}return a[e].exports}for(var c=!1,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,n){"use strict";function r(t,e){for(var n=!!t.getAttribute("data-show-if"),r=n?t.getAttribute("data-show-if").split(":"):t.getAttribute("data-hide-if").split(":"),i=r[0],o=(1<r.length?r[1]:"*").split("|"),s=function(t,e,n){for(var r=[],i=t.querySelectorAll('input[name="'+e+'"], select[name="'+e+'"], textarea[name="'+e+'"], button[name="'+e+'"]'),o=0;o<i.length;o++){var s=i[o],a=s.type.toLowerCase();if("radio"!==a&&"checkbox"!==a||s.checked){if("button"===a||"submit"===a||"BUTTON"===s.tagName){if((!n||n.target!==s)&&t.dataset[e]!==s.value)continue;t.dataset[e]=s.value}r.push(s.value)}}return 0===r.length&&r.push(""),r}(function(t){for(var e=t;e.parentElement;)if("FORM"===(e=e.parentElement).tagName)return e;return null}(t),i,e),a=!1,u=0;u<s.length;u++){var l=s[u];if(a=-1<o.indexOf(l)||-1<o.indexOf("*")&&0<l.length)break}t.style.display=n?a?"":"none":a?"none":"";var c=t.querySelectorAll("input, select, textarea");[].forEach.call(c,function(t){(a||n)&&t.getAttribute("data-was-required")&&(t.required=!0,t.removeAttribute("data-was-required")),a&&n||!t.required||(t.setAttribute("data-was-required","true"),t.required=!1)})}function i(){var t=document.querySelectorAll(".hf-form [data-show-if], .hf-form [data-hide-if]");[].forEach.call(t,r)}function o(e){if(e.target&&e.target.form&&!(e.target.form.className.indexOf("hf-form")<0)){var t=e.target.form.querySelectorAll("[data-show-if], [data-hide-if]");[].forEach.call(t,function(t){return r(t,e)})}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s={init:function(){document.addEventListener("click",o,!0),document.addEventListener("keyup",o,!0),document.addEventListener("change",o,!0),document.addEventListener("hf-refresh",i,!0),window.addEventListener("load",i),i()}};n.default=s},{}],2:[function(t,e,n){"use strict";function r(t){return t.innerHTML?t.innerHTML:t.value}function i(t,e){t.innerHTML?t.innerHTML=e:t.value=e}function o(t){this.form=t,this.button=t.querySelector('input[type="submit"], button[type="submit"]'),this.loadingInterval=0,this.character="Â·",this.button&&(this.originalButton=this.button.cloneNode(!0))}o.prototype.setCharacter=function(t){this.character=t},o.prototype.start=function(){if(this.button){var t=this.button.getAttribute("data-loading-text");if(t)return void i(this.button,t);var e=window.getComputedStyle(this.button);this.button.style.width=e.width,i(this.button,this.character),this.loadingInterval=window.setInterval(this.tick.bind(this),500)}else this.form.style.opacity="0.5"},o.prototype.tick=function(){var t=r(this.button),e=this.character;i(this.button,5<=t.length?e:t+" "+e)},o.prototype.stop=function(){if(this.button){this.button.style.width=this.originalButton.style.width;var t=r(this.originalButton);i(this.button,t),window.clearInterval(this.loadingInterval)}else this.form.style.opacity=""},e.exports=o},{}],3:[function(t,e,n){"use strict";function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("populate.js");var i={init:function(){if(window.URLSearchParams){var t=[].filter.call(document.forms,function(t){return-1<t.className.indexOf("hf-form")});if(t){var e=function(t){var e=new URLSearchParams(t),n={},r=!0,i=!1,o=void 0;try{for(var s,a=e.entries()[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var u=d(s.value,2),l=u[0],c=u[1];if("[]"===l.substr(l.length-2)){var f=l.substr(0,l.length-2);n[f]=n[f]||[],n[f].push(c)}else n[l]=c}}catch(t){i=!0,o=t}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}(window.location.search);t.forEach(function(t){r(t,e)})}}}};n.default=i},{"populate.js":6}],4:[function(t,e,n){"use strict";!function(){if("function"==typeof window.CustomEvent)return;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}()},{}],5:[function(t,e,n){"use strict";var r=o(t("./form-prefiller.js")),i=o(t("./conditionality.js"));function o(t){return t&&t.__esModule?t:{default:t}}t("./polyfills/custom-event.js");var s=t("./form-loading-indicator.js"),a=window.hf_js_vars||{ajax_url:window.location.href},u=new(t("wolfy87-eventemitter"));function l(t){!function(t){var e=t.querySelectorAll(".hf-message");[].forEach.call(e,function(t){t.parentNode.removeChild(t)})}(t),c("submit",t);var e=new FormData(t);[].forEach.call(t.querySelectorAll("[data-was-required=true]"),function(t){e.append("_was_required[]",t.getAttribute("name"))});var n=new XMLHttpRequest;n.onreadystatechange=function(e){var n=new s(e);return n.start(),function(){var t;if(4===this.readyState)if(n.stop(),200<=this.status&&this.status<400){try{t=JSON.parse(this.responseText)}catch(t){return void console.log('HTML Forms: failed to parse AJAX response.\n\nError: "'+t+'"')}c("submitted",e),t.error?c("error",e):c("success",e),t.message&&(function(t,e){var n=document.createElement("p");n.className="hf-message hf-message-"+e.type,n.innerHTML=e.text,n.role="alert",(t.querySelector(".hf-messages")||t).appendChild(n)}(e,t.message),c("message",e)),t.hide_form&&(e.querySelector(".hf-fields-wrap").style.display="none"),t.redirect_url&&(window.location=t.redirect_url),t.error||e.reset()}else console.log(this.responseText)}}(t),n.open("POST",a.ajax_url,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(e),n=null}function c(t,e){e.dispatchEvent(new CustomEvent("hf-"+t)),u.emit(t,[e])}document.addEventListener("submit",function(t){var e=t.target;e.className.indexOf("hf-form")<0||(t.preventDefault(),l(e))},!1),i.default.init(),r.default.init(),window.html_forms={on:u.on.bind(u),submit:l}},{"./conditionality.js":1,"./form-loading-indicator.js":2,"./form-prefiller.js":3,"./polyfills/custom-event.js":4,"wolfy87-eventemitter":7}],6:[function(t,e,n){var r,c;r=this,c=function(t,e,n){for(var r in e)if(e.hasOwnProperty(r)){var i=r,o=e[r];if(void 0===o&&(o=""),null===o&&(o=""),void 0!==n&&(i=n+"["+r+"]"),o.constructor===Array)i+="[]";else if("object"==typeof o){c(t,o,i);continue}var s=t.elements.namedItem(i);if(s)switch(s.type||s[0].type){default:s.value=o;break;case"radio":case"checkbox":for(var a=0;a<s.length;a++)s[a].checked=-1<o.indexOf(s[a].value);break;case"select-multiple":for(var u=o.constructor==Array?o:[o],l=0;l<s.options.length;l++)s.options[l].selected|=-1<u.indexOf(s.options[l].value);break;case"select":case"select-one":s.value=o.toString()||o;break;case"date":s.value=new Date(o).toISOString().split("T")[0]}}},"function"==typeof a&&"object"==typeof a.amd&&a.amd?a(function(){return c}):void 0!==e&&e.exports?e.exports=c:r.populate=c},{}],7:[function(t,s,e){!function(t){"use strict";function e(){}var n=e.prototype,r=t.EventEmitter;function o(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function i(t){return function(){return this[t].apply(this,arguments)}}n.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},n.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},n.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},n.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===o(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},n.on=i("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=i("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=o(i[r],e))&&i[r].splice(n,1);return this},n.off=i("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,n){var r,i,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)o.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?o.call(this,r,i):s.call(this,r,i));return this},n.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"==n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},n.removeAllListeners=i("removeEvent"),n.emitEvent=function(t,e){var n,r,i,o,s=this.getListenersAsObject(t);for(o in s)if(s.hasOwnProperty(o))for(n=s[o].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},n.trigger=i("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},n._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=r,e},"function"==typeof a&&a.amd?a(function(){return e}):"object"==typeof s&&s.exports?s.exports=e:t.EventEmitter=e}("undefined"!=typeof window?window:this||{})},{}]},{},[5])}();
//# sourceMappingURL=public.min.js.map
